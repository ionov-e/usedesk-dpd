#!/usr/bin/env php
<?php

use App\Service\DpdOrder;

$pathToRootFolder = realpath(dirname(__FILE__, 2));

require_once $pathToRootFolder . "/vendor/autoload.php";
require_once $pathToRootFolder . "/config/global.php";

if ($argc < 2) {
    echo "Укажите выполняемую команду. Для справки смотрите --help";
    echo PHP_EOL;
    exit(1);
}

if ($argv[1] == "--help") {
    echo "Список доступных скриптов:\n";
    echo "state/check\t\t-\tпроверка статусов всех заявок";
    echo PHP_EOL;
    exit(0);
}

switch ($argv[1]) {
    case "state/check":
        DpdOrder::updateProcessStates();
        break;
    default:
        echo "Неизвестная команда. Для справки смотрите --help";
        echo PHP_EOL;
}

exit(0);
